#La Resistance France events

###   ##  #   ### ### ###  ##   ##  #       #   # ###  ##  #   ### #  #  ##  ### 
#  # #  # #    #   #   #  #  # #  # #       #   #  #  #  # #   #   ## # #  # #   
###  #  # #    #   #   #  #    #### #        # #   #  #  # #   ##  # ## #    ##  
#    #  # #    #   #   #  #  # #  # #        # #   #  #  # #   #   #  # #  # #   
#     ##  ### ###  #  ###  ##  #  # ###       #   ###  ##  ### ### #  #  ##  ### 


add_namespace = lar_france_political_violence

# right wing riots
country_event = {
	id = lar_france_political_violence.1
	title = lar_france_political_violence.1.t
	desc = lar_france_political_violence.1.desc
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes

	option = {
		name = lar_france_political_violence.1.a #ignore
		add_stability = -0.05
		add_popularity = { ideology = fascism popularity = 0.025 }
		add_popularity = { ideology = neutrality popularity = 0.025 }
	}

	option = {
		name = lar_france_political_violence.1.b #prosecute
		add_political_power = -50
	}
}

# communist riots
country_event = {
	id = lar_france_political_violence.2
	title = lar_france_political_violence.1.t
	desc = lar_france_political_violence.2.desc
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes

	option = {
		name = lar_france_political_violence.1.a #ignore
		add_stability = -0.05
		add_popularity = { ideology = communism popularity = 0.025 }
	}

	option = {
		name = lar_france_political_violence.1.b #prosecute
		add_political_power = -50
	}
}

# massive right wing riots
country_event = {
	id = lar_france_political_violence.3
	title = lar_france_political_violence.3.t
	desc = lar_france_political_violence.3.desc
	picture = GFX_report_event_generic_riot
	is_triggered_only = yes

	option = {
		name = lar_france_political_violence.3.a #ignore
		add_stability = -0.1
		add_popularity = { ideology = fascism popularity = 0.05 }
		add_popularity = { ideology = neutrality popularity = 0.05 }
	}

	option = {
		name = lar_france_political_violence.3.b #prosecute
		add_political_power = -150
	}
}

# political violence returns at low stability
country_event = {
	id = lar_france_political_violence.4
	title = lar_france_political_violence.4.t
	desc = lar_france_political_violence.4.desc
	picture = GFX_report_event_generic_rally2
	mean_time_to_happen = { days = 50 }

	trigger = {
		original_tag = FRA
		NOT = {
			has_completed_focus = FRA_ban_communism
			has_completed_focus = FRA_ban_the_leagues
		}
		not = { has_idea = FRA_political_violence }
		has_stability < 0.5
		has_capitulated = no
	}

	immediate = {
		hidden_effect = {
			add_ideas = FRA_political_violence
		}
	}

	option = {
		name = lar_france_political_violence.4.a #ignore
		effect_tooltip = {
			add_ideas = FRA_political_violence
		}
	}
}

### #  # ###      ### #  # ###      ##   ##   ##  #  # ###   ##  ### ###  ##  #  # 
#   ## # #  #      #  #  # #       #  # #  # #  # #  # #  # #  #  #   #  #  # ## # 
##  # ## #  #      #  #### ##      #  # #    #    #  # ###  ####  #   #  #  # # ## 
#   #  # #  #      #  #  # #       #  # #  # #  # #  # #    #  #  #   #  #  # #  # 
### #  # ###       #  #  # ###      ##   ##   ##   ##  #    #  #  #  ###  ##  #  # 

add_namespace = lar_end_the_occupation

#initial event for Germany - vichy wants to end the occupation and join the axis
country_event = {
	id = lar_end_the_occupation.1
	title = lar_end_the_occupation.1.t
	desc = lar_end_the_occupation.1.desc
	picture = GFX_report_event_pierre_laval

	is_triggered_only = yes

	option = {
		name = lar_end_the_occupation.1.a #agree
		ai_chance = {
			factor = 80
		}
		FROM = { country_event = lar_end_the_occupation.2 }
		effect_tooltip = {
			every_state = {
				limit = {
					is_core_of = FROM
					is_controlled_by = ROOT
				}
				FROM = { transfer_state = PREV }
			}
		}
	}
	option = {
		name = lar_end_the_occupation.1.b #refuse
		ai_chance = {
			factor = 20
			modifier = {
				is_in_faction_with = FROM
				factor = 0
			}
			modifier = {
				FROM = {
					has_war = yes
					any_enemy_country = {
						has_war_with = ROOT
					}
				}
				factor = 0
			}
		}
		FROM = { country_event = lar_end_the_occupation.3 }
	}
}
# Germany approves
country_event = {
	id = lar_end_the_occupation.2
	title = lar_end_the_occupation.2.t
	desc = lar_end_the_occupation.2.desc
	picture = GFX_report_event_generic_military_parade

	is_triggered_only = yes

	option = {
		name = lar_end_the_occupation.2.a 
		ai_chance = {
			factor = 50
		}
		hidden_effect = { news_event = { id = lar_news.4 days = 3 random_days = 5 } }
		every_state = { #take over core french territory that is being held by Germany
			limit = {
				is_core_of = ROOT
				NOT = { state = 28 } #Elsass-Lothringen ist deutsch!
				NOT = { state = 735 } #Savoy is Italian
				OR = {
					is_controlled_by = FROM
					CONTROLLER = {
						is_in_faction_with = FROM 
					}
				}
			}
			ROOT = { transfer_state = PREV }
		}
		if = {
			limit = {
				NOT = { is_in_faction_with = FROM }
			}
			FROM = { add_to_faction = ROOT }
		}
		load_focus_tree = french_focus
		unlock_national_focus = FRA_revive_the_national_bloc

	}
}

# Germany refuses
country_event = {
	id = lar_end_the_occupation.3
	title = lar_end_the_occupation.3.t
	desc = lar_end_the_occupation.3.desc
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = {
		name = lar_end_the_occupation.3.a #let's talk to Free France
		ai_chance = {
			factor = 50
		}
		random_other_country = {
			limit = { 
				original_tag = FRA 
				has_government = democratic
			}
			country_event = lar_end_the_occupation.4
			effect_tooltip = { annex_country = { target = VIC transfer_troops = yes } }
		}
	}
	option = {
		name = lar_end_the_occupation.3.b #fine, we'll do it ourselves
		ai_chance = {
			factor = 50
		}
		load_focus_tree = french_focus
		unlock_national_focus = FRA_revive_the_national_bloc
	}
}

# Vichy wants to join after germany refuses to hand back territory
country_event = {
	id = lar_end_the_occupation.4
	title = lar_end_the_occupation.4.t
	desc = lar_end_the_occupation.4.desc
	picture = GFX_report_event_degaulle_inspect_troops

	is_triggered_only = yes

	option = {
		name = lar_end_the_occupation.4.a #agree
		ai_chance = {
			factor = 80
		}
		FROM = { country_event = lar_end_the_occupation.5 }
		effect_tooltip = {
			annex_country = { target = VIC transfer_troops = yes }
		}
	}
	option = {
		name = lar_end_the_occupation.4.b #refuse
		ai_chance = {
			factor = 20
			modifier = {
				FROM = { is_ai = no }
				factor = 0
			}
		}
		FROM = { country_event = lar_end_the_occupation.6 }
	}
}

# Vichy joins Free France after germany refuses to hand back territory
country_event = {
	id = lar_end_the_occupation.5
	title = lar_end_the_occupation.5.t
	desc = lar_end_the_occupation.5.desc
	picture = GFX_report_event_degaulle_inspect_troops

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			FROM = {
				if = {
					limit = {
						is_ai = yes
						VIC = { is_ai = no }
					}
					change_tag_from = VIC
				}
			}
		}
	}

	option = {
		name = lar_end_the_occupation.5.a #agree
		ai_chance = {
			factor = 80
		}
		FRA = {
			annex_country = { target = VIC transfer_troops = yes }
			load_focus_tree = french_focus
			unlock_national_focus = FRA_revive_the_national_bloc
			unlock_national_focus = FRA_laissez_faire
			unlock_national_focus = FRA_protect_the_rights_of_man
			unlock_national_focus = FRA_review_foreign_policy		
		}
	}
}

# Free France refuses, Vichy goes at it alone after all
country_event = {
	id = lar_end_the_occupation.6
	title = lar_end_the_occupation.6.t
	desc = lar_end_the_occupation.6.desc
	picture = GFX_report_event_degaulle_churchill

	is_triggered_only = yes

	option = {
		name = lar_end_the_occupation.6.a #agree
		ai_chance = {
			factor = 80
		}
		load_focus_tree = french_focus
		unlock_national_focus = FRA_revive_the_national_bloc
	}
}



#   #  ##  ###  # # ### ###       ## #  #  ##  ###  ###  ##   ##  ### 
#   # #  # #  # # # #   #  #     #   #  # #  # #  #  #  #  # #    #   
# # # #  # ###  ##  ##  ###       #  #### #  # ###   #  #### # ## ##  
# # # #  # #  # # # #   #  #       # #  # #  # #  #  #  #  # #  # #   
 # #   ##  #  # # # ### #  #     ##  #  #  ##  #  #  #  #  #  ##  ### 


#events to notify player that they are having worker issues
add_namespace = lar_worker_shortage

#country switched to extensive conscription while on full employment
country_event = {
	id = lar_worker_shortage.1
	title = lar_worker_shortage.1.t
	desc = lar_worker_shortage.1.desc
	picture = GFX_report_event_generic_factory

	trigger = {
		tag = FRA
		has_idea = FRA_full_employment
		not = { has_idea = FRA_worker_shortage }
		OR = {
			has_idea = extensive_conscription
			has_idea = service_by_requirement
			has_idea = all_adults_serve
			has_idea = scraping_the_barrel
		}
	}
	mean_time_to_happen = { days = 20 }
	
	immediate = {
		hidden_effect = {
			swap_ideas = {
				remove_idea = FRA_full_employment
				add_idea = FRA_worker_shortage
			}
		}
	}

	option = {
		name = lar_worker_shortage.1.a #agree
		ai_chance = {
			factor = 80
		}
		effect_tooltip = { #actual effect in immediate so player can not avoid by waiting it out, tooltip here to tell player what is happening
			swap_ideas = {
				remove_idea = FRA_full_employment
				add_idea = FRA_worker_shortage
			}
		}
	}
}

#country demobilizes while having worker shortage
country_event = {
	id = lar_worker_shortage.2
	title = lar_worker_shortage.2.t
	desc = lar_worker_shortage.2.desc
	picture = GFX_report_event_france_tank_production

	trigger = {
		tag = FRA
		has_idea = FRA_worker_shortage
		not = { has_idea = FRA_full_employment }
		OR = {
			has_idea = limited_conscription
			has_idea = disarmed_nation
			has_idea = volunteer_only
		}
	}
	mean_time_to_happen = { days = 20 }
	option = {
		name = lar_worker_shortage.2.a #agree
		ai_chance = {
			factor = 80
		}
		swap_ideas = {
			remove_idea = FRA_worker_shortage
			add_idea = FRA_full_employment
		}
	}
}

 ##  ###  #   #  ##     ###  #  # ###   ##  #  #  ##   ## ###  ## 
#  # #  # ## ## #       #  # #  # #  # #  # #  # #  # #   #   #   
#### ###  # # #  #      ###  #  # ###  #    #### ####  #  ##   #  
#  # #  # #   #   #     #    #  # #  # #  # #  # #  #   # #     # 
#  # #  # #   # ##      #     ##  #  #  ##  #  # #  # ##  ### ##  

add_namespace = lar_arms_purchases

#intial event for US - France wants to buy weapons
country_event = {
	id = lar_arms_purchases.1
	title = lar_arms_purchases.1.t
	desc = lar_arms_purchases.1.desc
	picture = GFX_report_event_generic_lend_lease
	is_triggered_only = yes
	option = {
		name = lar_arms_purchases.1.a #agree
		ai_chance = {
			factor = 40
		}
		trigger = {
			USA_can_sell_weapons_trigger = yes
		}
		FRA = {
			country_event = lar_arms_purchases.2
		}
		army_experience = 10
	}

	option = {
		name = lar_arms_purchases.1.b #refuse
		ai_chance = {
			factor = 60
			modifier = {
				FRA = { has_war = yes }
				factor = 0.5
			}
		}
		FRA = {
			country_event = lar_arms_purchases.3
		}
	}
}

# rasponse event for France - country agrees
country_event = {
	id = lar_arms_purchases.2
	title = lar_arms_purchases.2.t
	desc = lar_arms_purchases.2.desc
	picture = GFX_report_event_merchant_ship_01
	is_triggered_only = yes
	option = {
		name = lar_arms_purchases.2.a #agree
		ai_chance = {
			factor = 100
		}
		set_country_flag = FRA_arms_purchases_permitted
	}
}
#response event for France - US refuse
country_event = {
	id = lar_arms_purchases.3
	title = lar_arms_purchases.3.t
	desc = lar_arms_purchases.3.desc
	picture = GFX_report_event_generic_read_write
	is_triggered_only = yes
	option = {
		name = lar_arms_purchases.3.a #agree
		ai_chance = {
			factor = 80
		}
	}
}

#   # ###  ##  #  # #   #     ###  ### #  # #  # ### ### ###  ##   ##  ### ###  ##  #  # 
#   #  #  #  # #  #  # #      #  # #   #  # ## #  #  #    #  #  # #  #  #   #  #  # ## # 
 # #   #  #    ####   #       ###  ##  #  # # ##  #  ##   #  #    ####  #   #  #  # # ## 
 # #   #  #  # #  #   #       #  # #   #  # #  #  #  #    #  #  # #  #  #   #  #  # #  # 
  #   ###  ##  #  #   #       #  # ###  ##  #  # ### #   ###  ##  #  #  #  ###  ##  #  # 

add_namespace = lar_france_vichy_reunification

# initial event - Vichy government asked to unify with FRA
country_event = {
	id = lar_france_vichy_reunification.1
	title = lar_france_vichy_reunification.1.t
	desc = lar_france_vichy_reunification.1.desc
	picture = GFX_report_event_degaulle_inspect_troops
	is_triggered_only = yes
	option = {
		name = lar_france_vichy_reunification.1.a #agree
		ai_chance = {
			factor = 80
		}
		if = {
			limit = { FROM = { is_ai = no } }
			custom_effect_tooltip = GAME_OVER_TT
		}
		FROM = {
			country_event = lar_france_vichy_reunification.2
		}
	}

	option = {
		name = lar_france_vichy_reunification.1.b #refuse
		ai_chance = {
			factor = 20
			modifier = {
				FROM = {
					is_ai = no #don't refuse the player
				}
				factor = 0
			}
			modifier = {
				is_historical_focus_on = yes
				factor = 0
			}
		}
		FROM = { country_event = lar_france_vichy_reunification.3 }
	}
}

#VIC agrees to unification - event for FRA
country_event = {
	id = lar_france_vichy_reunification.2
	title = lar_france_vichy_reunification.2.t
	desc = lar_france_vichy_reunification.2.desc
	picture = GFX_report_event_degaulle_inspect_troops
	is_triggered_only = yes
	option = {
		name = lar_france_vichy_reunification.2.a #agree
		ai_chance = {
			factor = 80
		}
		if = {
			limit = {
				FROM = { is_ai = no }
				is_ai = yes
			}
			change_tag_from = FROM #if Vichy is played by player and FRA is AI, player gets to keep playing
		}
		
		annex_country = { target = FROM transfer_troops = yes } 
	}
}

#VIC refuses unification, FRA gains wargoal
country_event = {
	id = lar_france_vichy_reunification.3
	title = lar_france_vichy_reunification.3.t
	desc = lar_france_vichy_reunification.3.desc
	picture = GFX_report_event_degaulle_churchill
	is_triggered_only = yes
	option = {
		name = lar_france_vichy_reunification.3.a #agree
		ai_chance = {
			factor = 80
		}
		create_wargoal = {
			type = annex_everything
			target = FROM
		}
	}
}

add_namespace = lar_fra_inefficient_economy

country_event = {
	id = lar_fra_inefficient_economy.1
	hidden = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = {
		if = {
			limit = { has_idea = FRA_inefficient_economy_2 }
			swap_ideas = {
				remove_idea = FRA_inefficient_economy_2
				add_idea = FRA_inefficient_economy_1
			}
		}
		else_if = {
			limit = {
				has_idea = FRA_inefficient_economy_1
			}
			remove_ideas = FRA_inefficient_economy_1
		}
	}
	option = {
		
	}
}

add_namespace = lar_fra_reconnect_to_the_balkans

#first event - balkan country asked if it wants to join the French faction
country_event = {
	id = lar_fra_reconnect_to_the_balkans.1
	title = generic.5.t
	desc = generic.5.d.a
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_applicant
			FROM = {
				save_event_target_as = alliance_inviter
			}
		}
	}

	option = { #accept
		name = generic.5.a	
		ai_chance = {
			factor = 100
		}
		var:FROM.faction_leader = { country_event = lar_fra_reconnect_to_the_balkans.2 }
	}

	option = { #refuse
		name = generic.2.f
		ai_chance = {
			factor = 0
		}
		FROM = {
			country_event = lar_fra_reconnect_to_the_balkans.3
		}
	}
}
#event 2 - country wants to join faction, ask faction leader?
country_event = {
	id = lar_fra_reconnect_to_the_balkans.2
	title = generic.2.t
	desc = generic.2.d.a
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_inviter
			FROM = {
				save_event_target_as = alliance_applicant
			}
		}
	}

	option = { #accept
		name = generic.2.a	
		ai_chance = {
			factor = 100
		}
		FROM = { country_event = lar_fra_reconnect_to_the_balkans.4 }
		FROM.FROM = { country_event = lar_fra_reconnect_to_the_balkans.4 }
		add_to_faction = FROM
	}

	option = { #refuse
		name = generic.2.f
		ai_chance = {
			factor = 0
		}
		FROM = {
			country_event = lar_fra_reconnect_to_the_balkans.5
		}
		FROM.FROM = {
			country_event = lar_fra_reconnect_to_the_balkans.5
		}
	}
}

#event 3 - country does not want to join faction at all
country_event = {
	id = lar_fra_reconnect_to_the_balkans.3
	title = generic.7.t
	desc = generic.7.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	

	option = { #accept
		name = generic.7.a	
		ai_chance = {
			factor = 100
		}
	}
}

#event 4 - request accepted by faction leader
country_event = {
	id = lar_fra_reconnect_to_the_balkans.4
	title = generic.6.t
	desc = generic.6.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	

	option = { #accept
		name = generic.3.a	
		ai_chance = {
			factor = 100
		}
	}
}

#event 4 - request refused by faction leader
country_event = {
	id = lar_fra_reconnect_to_the_balkans.5
	title = generic.4.t
	desc = generic.4.d
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes
	

	option = { #accept
		name = generic.4.a	
		ai_chance = {
			factor = 100
		}
	}
}