###########################
# German Events
###########################

add_namespace = germany

# Austrian Anschluss Completed
country_event = {
	id = germany.4
	title = germany.4.t
	desc = germany.4.d
	picture = GFX_report_event_german_speech

	is_triggered_only = yes

 	immediate = {
 		hidden_effect = {
 			add_named_threat = { threat = 10 name = germany.4.t }
 		}
 	}

	option = {
		name = germany.4.a
		4 = {
			if = {
				limit = { is_owned_by = AUS }
				add_core_of = GER
			}
		}
		152 = {
			if = {
				limit = { is_owned_by = AUS }
				add_core_of = GER
			}
		}
		153 = {
			if = {
				limit = { is_owned_by = AUS }
				add_core_of = GER
			}
		}
		AUS = {
			every_unit_leader = {
				set_nationality = GER
			}
		}
		annex_country = { target = AUS transfer_troops = yes }
		add_political_power = 75
		set_country_flag = AUS_annexed
		add_war_support = 0.1
		add_stability = 0.05
		USA = {
			set_country_flag = { flag = USA_anschluss_window days = 60 value = 1 }
		}
		custom_effect_tooltip = anschluss_mefo_bills_tt
		hidden_effect = { # Having it appear twice might be confusing
			GER_mefo_bills_level_down = yes
			GER_mefo_bills_level_down = yes
		}
		custom_effect_tooltip = anschluss_mefo_bills_double_reduction
		add_to_variable = { var = GER_mefo_bill_counter value = -10 }

		if = {
			limit = {
				has_dlc = "Death or Dishonor"
				country_exists = YUG
				YUG = { has_war = no }
			}
			country_event = {
				id = DOD_yugoslavia.30
				days = 4
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.36 }
		}
	}
}

#anti_comintern_pact
# nations are asked to join pact, agreeing = relations with GER and hit with SOV

country_event = {
	id = germany.5
	title = germany.5.t
	desc = germany.5.d
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes

	option = {
		name = germany.5.a		#join
		ai_chance = {
			factor = 75
			modifier = {
				factor = 4
				has_opinion = {
					target = SOV
					value < -10
				}
			}
			modifier = {
				factor = 0.5
				has_opinion = {
					target = GER
					value < -10
				}
			}
			modifier = {
				factor = 0
				has_war = yes
			}
			# modifier = {
			# 	factor = 0
			# 	tag = JAP
			# 	has_completed_focus = JAP_the_unthinkable_option
			# }
			modifier = {
				factor = 0
				is_literally_china = yes
				JAP = { has_completed_focus = JAP_purge_the_kodoha_faction }
			}
			modifier = {
				factor = 0
				tag = JAP
				has_completed_focus = JAP_purge_the_kodoha_faction
				date > 1938.1.1
			}
		}
		set_country_flag = anti_comintern_member
		GER = { add_opinion_modifier = { target = ROOT modifier = anti_comintern_pact_opinion } }
		add_opinion_modifier = { target = GER modifier = anti_comintern_pact_opinion }
		SOV  = { add_opinion_modifier = { target = ROOT modifier = pact_against_us } }
	}

	option = {
		name = germany.5.b		#refuse
		trigger = { NOT = { is_puppet_of = GER } }
		ai_chance = {
			factor = 25
		}
		GER =  { add_opinion_modifier = { target = ROOT modifier = refused_anti_comintern_pact_opinion } }
	}

}

# tripartite_pact
# anti_comintern_pact nations are asked to join pact, agreeing = relations with GER and hit with SOV

country_event = {
	id = germany.6
	title = germany.6.t
	desc = germany.6.d
	picture = GFX_report_event_hitler_croatia_handshake


	is_triggered_only = yes

	option = {
		name = germany.6.a		#join
		remove_opinion_modifier = { target = GER modifier = anti_comintern_pact_opinion }
		add_opinion_modifier = { target = GER modifier = tripartite_pact_opinion }
		remove_opinion_modifier = { target = SOV modifier = pact_against_us }
		add_opinion_modifier = { target = SOV modifier = worse_pact_against_us }
	}

	option = {
		name = germany.6.b		#refuse
		trigger = { NOT = { is_puppet_of = GER } }
		add_opinion_modifier = { target = GER modifier = refused_tripartite_pact_opinion }
	}

}

#molotov_ribbentrop_pact
# fire event to SOV to accept or not. adds claims
# SOV events sends reply to GER, adds claims if they said yes, hurts relations if they say no

# Molotov-Ribbentrop Pact (Soviets)
country_event = {
	id = germany.11
	title = germany.11.t
	desc = germany.11.d
	picture = GFX_report_event_molotov_ribentrop_handshake

	is_triggered_only = yes

	option = {
		name = germany.11.a	#sounds good
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				GER = {
					OR = {
						has_wargoal_against = SOV
						is_justifying_wargoal_against = SOV
					}
					NOT = {
						is_in_faction_with = SOV
					}
				}
			}
		}
		add_opinion_modifier = { target = GER modifier = MR_pact }# pact
		custom_effect_tooltip = germany.11.a.tt
		if = {
			limit = {
				NOT = { owns_state = 146 }
			}
			add_state_core = 146 #KARELIA (FIN)
		}
		if = {
			limit = {
				NOT = { owns_state = 147 }
			}
			add_state_core = 147 #SALLA (FIN)
		}
		if = {
			limit = {
				NOT = { owns_state = 722 }
			}
			add_state_core = 722 #PETSAMO (FIN)
		}
		if = {
			limit = {
				NOT = { owns_state = 13 }
			}
			add_state_core = 13 #PÄRNU (EST)
		}
		if = {
			limit = {
				NOT = { owns_state = 191 }
			}
			add_state_core = 191 #TARTU (EST)
		}
		if = {
			limit = {
				NOT = { owns_state = 811 }
			}
			add_state_core = 811 #SAAREMAA (EST)
		}
		if = {
			limit = {
				NOT = { owns_state = 813 }
			}
			add_state_core = 813 #VIRUMAA (EST)
		}
		if = {
			limit = {
				NOT = { owns_state = 812 }
			}
			add_state_core = 812 #TALLIN (EST)
		}
		if = {
			limit = {
				NOT = { owns_state = 12 }
			}
			add_state_core = 12 #VIDZEME (LAT)
		}
		if = {
			limit = {
				NOT = { owns_state = 190 }
			}
			add_state_core = 190 #KURZEME (LAT)
		}
		if = {
			limit = {
				NOT = { owns_state = 808 }
			}
			add_state_core = 808 #RIGA (LAT)
		}
		if = {
			limit = {
				NOT = { owns_state = 809 }
			}
			add_state_core = 809 #ZEMGALE (LAT)
		}
		if = {
			limit = {
				NOT = { owns_state = 810 }
			}
			add_state_core = 810 #LATGALE (LAT)
		}
		if = {
			limit = {
				NOT = { owns_state = 11 }
			}
			add_state_core = 11 #KAUNAS (LIT)
		}
		if = {
			limit = {
				NOT = { owns_state = 784 }
			}
			add_state_core = 784 #WILNO (LIT)
		}
		if = {
			limit = {
				NOT = { owns_state = 189 }
			}
			add_state_core = 189 #ZEMAITIJA (LIT)
		}
		if = {
			limit = {
				NOT = { owns_state = 814 }
			}
			add_state_core = 814 #SUDUVA (LIT)
		}
		if = {
			limit = {
				NOT = { owns_state = 815 }
			}
			add_state_core = 815 #AUKSTAITIJA (LIT)
		}
		if = {
			limit = {
				NOT = { owns_state = 89 }
			}
			add_state_core = 89 #STANISLAWOW (POL)
		}
		if = {
			limit = {
				NOT = { owns_state = 91 }
			}
			add_state_core = 91 #LWOW (POL)
		}
		if = {
			limit = {
				NOT = { owns_state = 93 }
			}
			add_state_core = 93 #WOLYN (POL)
		}
		if = {
			limit = {
				NOT = { owns_state = 94 }
			}
			add_state_core = 94 #POLESIE (POL)
		}
		if = {
			limit = {
				NOT = { owns_state = 95 }
			}
			add_state_core = 95 #NOWOGRODEK (POL)
		}
		if = {
			limit = {
				NOT = { owns_state = 96 }
			}
			add_state_core = 96 #WILEJKA (POL)
		}
		if = {
			limit = {
				NOT = { owns_state = 97 }
			}
			add_state_core = 97 #BIALYSTOK (POL)
		}
		if = {
			limit = {
				NOT = { owns_state = 78 }
			}
			add_state_core = 78 #BESSARABIA (ROM)
		}
		if = {
			limit = {
				NOT = { owns_state = 80 }
			}
			add_state_core = 80 #BUCOVINA (ROM)
		}
		if = {
			limit = {
				NOT = { owns_state = 766 }
			}
			add_state_core = 766 #SOUTHERN BESSARABIA (ROM)
		}

		hidden_effect =  { add_timed_idea = { idea = SOV_molotov_ribbentrop_pact days = 730 } }
		GER = {
			country_event = { days = 1 id = germany.12 }
			effect_tooltip = {
				add_opinion_modifier = { target = SOV modifier = MR_pact }# pact
			}
		}
		set_global_flag = sov_yes_pact
	}
}

# Second Vienna Award
country_event = {
	id = germany.20
	title = germany.20.t
	desc = germany.20.d
	picture = GFX_report_event_vienna_award_hungary

	is_triggered_only = yes

	option = { # Give Hungary Northern Transylvania
		name = germany.20.a
		ai_chance = { factor = 80 }
		add_named_threat = { threat = 2 name = GER_second_vienna_award_HUN_north }
		HUN = {
			set_country_flag = GER_second_vienna_award_HUN_north
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_HUN_north }
		}
		ROM = {
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_ROM_north }
			country_event = { id = romania.2 }
		}
	}
	option = { # Give Hungary all of Transylvania
		trigger = {
			ROM = {
				controls_state = 77
				controls_state = 83
				controls_state = 84
			}
		}
		name = germany.20.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		add_named_threat = { threat = 3 name = GER_second_vienna_award_HUN_all }
		HUN = {
			set_country_flag = GER_second_vienna_award_HUN_all
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_HUN_all }
		}
		ROM = {
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_ROM_all }
			country_event = { id = romania.3 }
		}
	}
	option = { # Give Hungary nothing
		name = germany.20.c
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		ROM = {
			country_event = { id = romania.4 }
		}
		HUN = {
			set_country_flag = GER_second_vienna_award_noland
			add_opinion_modifier = { target = GER modifier = GER_second_vienna_award_noland }
			country_event = { id = hungary.1 }
		}
	}
}

# Romania Rejects Decision!
country_event = {
	id = germany.21
	title = germany.21.t
	desc = germany.21.d
	picture = GFX_report_event_vienna_award_hungary

	is_triggered_only = yes

	option = {
		name = germany.21.a
		create_wargoal = {
			type = take_state_focus
			target = ROM
			generator = { 76 }
		}
	}
}


# Japan Demands Withdrawal of Falkenhausen
country_event = {
	id = germany.24
	title = germany.24.t
	desc = germany.24.d
	picture = GFX_report_event_hitler_china

	is_triggered_only = yes

	option = { # Agree
		name = germany.24.a
		trigger = {
			NOT = { has_country_flag = GER_von_falkenhausen_promise_to_china }
		}
		JAP = {
			country_event = { days = 1 id = japan.8 }
		}
		CHI = {
			country_event = { days = 1 id = china.2 }
			effect_tooltip = {
				remove_ideas = german_advisors
				show_ideas_tooltip = german_advisors
			}
		}
	}
	option = { # Refuse
		name = germany.24.b
		trigger = {
			NOT = { has_country_flag = GER_von_falkenhausen_promise_to_china }
		}
		JAP = {
			country_event = { days = 1 id = japan.9 }
		}
	}

	option = { # Refuse, promised the Chinese in return for Tsingtao
		name = germany.24.c
		trigger = {
			has_country_flag = GER_von_falkenhausen_promise_to_china
		}
		JAP = {
			country_event = { days = 1 id = japan.9 }
		}
	}
}

# German - Chinese Relations Poor, Mission Recalled
country_event = {
	id = germany.25
	title = germany.25.t
	desc = germany.25.d
	picture = GFX_report_event_chinese_army_training

	fire_only_once = yes

	trigger = {
		tag = GER
		CHI = { has_idea = german_advisors }
		has_opinion = { target = CHI value < -20 }
	}

	mean_time_to_happen = {
		days = 60
	}

	immediate = {
		CHI = { remove_ideas = german_advisors }
	}

	option = {
		name = germany.25.a
		CHI = {
			country_event = { id = china.3 }
		}
	}
}


# Fortifying the Westwall
country_event = {
	id = germany.27
	title = germany.27.t
	desc = germany.27.d
	picture = GFX_report_event_bunker_01

	is_triggered_only = yes

	option = {
		name = germany.27.a
		50 = {
			add_building_construction = {
				type = bunker
				province = 11640
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 6712
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 6542
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 3530
				level = 5
			}
		}
		42 = {
			add_building_construction = {
				type = bunker
				province = 3558
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 563
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 11531
				level = 5
			}
			add_building_construction = {
				type = bunker
				province = 9575
				level = 5
			}
		}
	}
}

# Austria refuses Anschluss
country_event = {
	id = germany.29
	title = germany.29.t
	desc = germany.29.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = {
		name = germany.29.a
		add_state_claim = 4
		add_state_claim = 152
		add_state_claim = 153
		create_wargoal = {
			type = take_state_focus
			target = AUS
			generator = { 4 152 153 }
		}
	}
}

# France leaves the Allies
country_event = {
	id = germany.43
	title = germany.43.t
	desc = germany.43.d
	picture = GFX_report_event_french_british_officers

	is_triggered_only = yes

	option = {
		name = germany.43.a
		FRA = {
			add_opinion_modifier = { target = ENG modifier = abandoned_czechs }
		}
	}
}

# Czechoslovakia (British and (possibly) French Support)
country_event = {
	id = germany.44
	title = germany.40.t
	desc = germany.44.d
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.44.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 }
				}
			}
		}
	}
}

# Czechoslovakia (French Support)
country_event = {
	id = germany.45
	title = germany.40.t
	desc = germany.45.d
	picture = GFX_report_event_chamberlain_announce

	is_triggered_only = yes

	option = {
		name = germany.45.a
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 }
				}
			}
		}
	}
}

# Czechoslovakia (Abandoned)
country_event = {
	id = germany.46
	title = germany.46.t
	desc = germany.46.d
	picture = GFX_report_event_czech_soldiers_01

	is_triggered_only = yes

	option = { # Surrender the Sudetenland
		name = germany.46.a
		ai_chance = {
			factor = 90
			modifier = { # Decrease chance CZE resists if AUS isn't taken first
				AUS = { exists = yes }
				factor = 0.5
			}
			modifier = { # If they stand a chance they will fight
				factor = 0
				strength_ratio = {
					tag = GER
					ratio > 0.75
				}
				NOT = {
					any_neighbor_country = {
						NOT = { tag = GER }
						is_in_faction_with = GER
					}
				}
			}
			modifier = {
				factor = 0 #if you lead a faction, fight
				is_faction_leader = yes
			}
			modifier = {
				factor = 0.5 #if you are in a faction, maybe fight
				is_faction_leader = no
				is_in_faction = yes
			}
			modifier = {
				factor = 0.05 #if you are in a faction with a major, probably fight
				is_faction_leader = no
				is_in_faction = yes
				any_allied_country = {
					is_major = yes
				}
			}
			modifier = {
				factor = 0
				is_puppet = yes
				NOT = { is_puppet_of = GER } #puppeted CZE wouldn't surrender Sudetenland otherwise
			}
			modifier = { # Increase it again if other bordering nations are in Axis
				any_neighbor_country = {
					NOT = { tag = GER }
					is_in_faction_with = GER
				}
				factor = 2.0
			}
		}
		GER = { country_event = germany.50 }
	}
	option = { # Refuse anyway
		name = germany.46.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0.5
				strength_ratio = {
					tag = GER
					ratio < 0.5
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		GER = {
			add_opinion_modifier = { target = ROOT modifier = GER_demand_sudetenland_rejected }
			set_global_flag = CZE_refused_sudetenland
			country_event = germany.49
			effect_tooltip = {
				if = {
					limit = {
						CZE = {
							is_in_faction_with = GER
						}
					}
					GER = { remove_from_faction = CZE }
				}
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 74 }
				}
			}
		}
	}
}

# Germany (British and (possibly) French Support for Czechoslovakia)
country_event = {
	id = germany.47
	title = germany.40.t
	desc = germany.47.d
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.47.a
		create_wargoal = {
			type = take_state_focus
			target = CZE
			generator = { 69 74 }
		}
		add_state_claim = 69
		add_state_claim = 74
		hidden_effect = {
			news_event = { hours = 6 id = news.57 }
		}
		set_country_flag = allies_support_czechs
	}
}

# Germany (French Support for Czechoslovakia)
country_event = {
	id = germany.48
	title = germany.40.t
	desc = germany.48.d
	picture = GFX_report_event_chamberlain_announce

	is_triggered_only = yes

	option = {
		name = germany.48.a
		create_wargoal = {
			type = take_state_focus
			target = CZE
			generator = { 69 74 }
		}
		add_state_claim = 69
		add_state_claim = 74
		hidden_effect = {
			country_event = { hours = 6 id = news.58 }
		}
	}
}

# Hungary (First Vienna Award)
country_event = {
	id = germany.51
	title = germany.51.t
	desc = germany.51.d
	picture = GFX_report_event_vienna_award_negotiations

	is_triggered_only = yes

	option = {
		name = germany.51.a
		HUN = { transfer_state = 664 }
	}
}

# Poland (Zaolzie)
country_event = {
	id = germany.52
	title = germany.52.t
	desc = germany.52.d
	picture = GFX_report_event_polish_tanks_01

	is_triggered_only = yes

	option = {
		name = germany.52.a
		72 = { add_core_of = POL }
		POL = { transfer_state = 72 }
	}
}

# Czechoslovakia (The Fate of Czechoslovakia)
country_event = {
	id = germany.53
	title = germany.53.t
	desc = germany.53.d
	picture = GFX_report_event_german_politician_speech

	is_triggered_only = yes

	option = { # Agree
		name = germany.53.a
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					is_in_faction_with = ENG
					is_in_faction_with = FRA
					is_puppet = yes
					GER = {
						AND = {
							has_war_with = ENG
							has_war_with = FRA
						}
					}
					GER = {
						AND = {
							has_war_with = SOV
							OR = {
								has_war_with = ENG
								has_war_with = FRA
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				GER = {
					OR = {
						AND = {
							has_war_with = ENG
							NOT = {
								has_war_with = FRA
							}
						}
						AND = {
							has_war_with = FRA
							NOT = {
								has_war_with = ENG
							}
						}
					}
				}
			}
		}
		GER = { country_event = germany.55 }
		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = 0.1
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = 0.1
			}
		}
		if = {
			limit = {
				has_DLC = "Death or Dishonor"
				country_exists = YUG
				YUG = { has_war = no }
			}
			GER = {
				country_event = {
					id = DOD_yugoslavia.32
					hours = 6
				}
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
	}
	option = { # Refuse
		name = germany.53.b
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = ENG }
				NOT = { is_in_faction_with = FRA }
				is_puppet = no
				NOT = {
					GER = {
						has_war_with = ENG
						has_war_with = FRA
					}
				}
				NOT = {
					GER = {
						has_war_with = SOV
						OR = {
							has_war_with = ENG
							has_war_with = FRA
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				GER = {
					OR = {
						AND = {
							has_war_with = ENG
							NOT = {
								has_war_with = FRA
							}
						}
						AND = {
							has_war_with = FRA
							NOT = {
								has_war_with = ENG
							}
						}
					}
				}
			}
		}
		GER = {
			country_event = { id = germany.54 days = 1 }
		}
		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = 0.1
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = 0.1
			}
		}
	}
}

# The Czechs Resist
country_event = {
	id = germany.54
	title = germany.54.t
	desc = germany.54.d
	picture = GFX_report_event_czech_soldiers_01

	is_triggered_only = yes

	option = {
		name = germany.54.a
		if = {
			limit = {
				75 = {
					is_owned_and_controlled_by = CZE
				}
			}
			add_state_claim = 75
		}
		if = {
			limit = {
				9 = {
					is_owned_and_controlled_by = CZE
				}
			}
			add_state_claim = 9
		}
		create_wargoal = {
			type = annex_everything
			target = CZE
		}
	}
}

# Polish Question Completed
country_event = {
	id = germany.58
	title = germany.58.t
	desc = germany.58.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = {
		name = germany.58.a
		add_political_power = 150
	}

}

# Anschluss Preparations
country_event = {
	id = germany.74
	title = germany.74.t
	desc = germany.74.d
	picture = GFX_report_event_fascist_speech

	is_triggered_only = yes

	option = {
		name = germany.74.a
		#add_ideas = elyesa_bazna
	}
}

# German-Soviet Treaty (Soviets)
country_event = {
	id = germany.75
	title = germany.75.t
	desc = germany.75.d
	picture = GFX_report_event_physics_lab_01

	is_triggered_only = yes

	option = {
		name = germany.75.a	#sounds good
		GER = {
			country_event = { days = 1 id = germany.76 }
			add_opinion_modifier = {
				target = ROOT
				modifier = sov_ger_treaty
			}
			add_opinion_modifier = {
				target = ROOT
				modifier = sov_ger_treaty_trade
			}
		}
		# REVISIT Balance research bonus
		give_SOV_armor_research_bonuses = yes
	}

}

# Soviets Accept German-Soviet Treaty
country_event = {
	id = germany.76
	title = germany.76.t
	desc = germany.76.d
	picture = GFX_report_event_physics_lab_02

	is_triggered_only = yes

	option = {
		name = germany.76.a	#bah
		# REVISIT Balance research bonus
		if = {
			limit = {
				NOT = {
					has_dlc = "No Step Back"
				}
			}
			add_tech_bonus = {
				name = med_armor_bonus
				ahead_reduction = 1
				category = cat_medium_armor
			}
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1.0
				uses = 2
				category = armor
			}
		}
		else = { #NO STEP BACK EFFECTS
			add_tech_bonus = {
				name = armor_bonus
				bonus = 1.0
				uses = 2
				category = armor
			}
			if = {
				limit = {
					has_tech = basic_medium_tank_chassis
				}
				create_equipment_variant = {
					name = "Panzer III Ausf. A"
					type = medium_tank_chassis_1
					parent_version = 0
					modules = {
						main_armament_slot = tank_high_velocity_cannon
						turret_type_slot = tank_medium_three_man_tank_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_gasoline_engine
						special_type_slot_1 = tank_radio_1
						special_type_slot_2 = smoke_launchers
					}
					upgrades = {
						tank_nsb_engine_upgrade = 6
						tank_nsb_armor_upgrade = 3
					}
					icon = "gfx/interface/technologies/ger_basic_main_tank.dds"
				}
				create_equipment_variant = {
					name = "Panzer IV Ausf. A"
					type = medium_tank_chassis_1
					parent_version = 1
					modules = {
						main_armament_slot = tank_close_support_gun
						turret_type_slot = tank_medium_three_man_tank_turret
						suspension_type_slot = tank_bogie_suspension
						armor_type_slot = tank_welded_armor
						engine_type_slot = tank_gasoline_engine
						special_type_slot_1 = tank_radio_1
						special_type_slot_2 = smoke_launchers
					}
					upgrades = {
						tank_nsb_engine_upgrade = 6
						tank_nsb_armor_upgrade = 2
					}
					icon = "gfx/interface/technologies/ger_basic_main_tank.dds"
				}
			}
		}
		SOV = {
			add_opinion_modifier = { target = GER modifier = sov_ger_treaty }
			add_opinion_modifier = { target = GER modifier = sov_ger_treaty_trade }
		}
	}
}

# Soviets Reject German-Soviet Treaty
country_event = {
	id = germany.77
	title = germany.77.t
	desc = germany.77.d
	picture = GFX_report_event_physics_lab_02

	is_triggered_only = yes

	option = {
		name = germany.77.a
		#add_opinion_modifier = { target = SOV modifier = refused_MR_pact }# no pact
	}
}

# German Joint Air Research
country_event = {
	id = germany.78
	title = germany.78.t
	desc = germany.78.d
	picture = GFX_report_event_radar_01

	is_triggered_only = yes

	option = {
		name = germany.78.a
		add_ideas = GER_air_innovations_2_idea
		add_tech_bonus = {
				name = radar_tech_bonus
				bonus = 1.0
				uses = 1
				category = radar_tech
			}
	}
}


# Poland Refuses to give up Danzig
country_event = {
	id = germany.82
	title = germany.82.t
	desc = germany.82.d
	picture = GFX_report_event_polish_army

	is_triggered_only = yes

	option = {
		name = germany.82.a
		create_wargoal = {
			type = take_state_focus
			target = POL
			generator = { 85 }
		}
	}
}

# Anti-Soviet Pact
country_event = {
	id = germany.83
	title = germany.83.t
	desc = germany.83.d
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes

	option = {
		ai_chance = {
			factor = 10
		}
		name = germany.83.a		#join
		add_ideas = anti_soviet_pact
		SOV = {
			remove_opinion_modifier = { target = ROOT modifier = pact_against_us }
			add_opinion_modifier = { target = ROOT modifier = worse_pact_against_us }
		}
	}

	option = {
		name = germany.83.b		#refuse
		trigger = { NOT = { is_puppet_of = GER } }
		ai_chance = {
			factor = 2
		}
	}
}

# Call Pact Members to War (Instigator)
country_event = {
	id = germany.84
	title = germany.84.t
	desc = germany.84.d
	picture = GFX_report_event_soviet_tanks

	is_triggered_only = yes

	#immediate = {
	#	remove_ideas = anti_soviet_pact
	#}

	option = {
		name = germany.84.a
		every_other_country = {
			limit = {
				has_idea = anti_soviet_pact
				NOT = { has_war_with = SOV }
				is_subject = no
				any_other_country = {
					has_idea = anti_soviet_pact
					has_war_with = SOV
				}
			}
			country_event = { id = germany.85 days = 1 }
		}
		hidden_effect = {
			if = {
				limit = {
					original_tag = GER
					has_government = neutrality
				}
				country_event = { id = germany.127 days = 7 random_days = 7 }
			}
		}
	}
}


# Danzig or War (Poland)
country_event = {
	id = germany.86
	title = germany.86.t
	desc = germany.86.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	trigger = {
		NOT = { has_war_with = GER }
	}

	option = {
		name = germany.86.a
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		GER = { country_event = { id = germany.87 days = 1 } }
		effect_tooltip = {
			GER = {
				transfer_state = 85
				add_state_core = 85
				transfer_state = 807
				add_state_core = 807
				remove_state_claim = 86
				remove_state_claim = 762
			}
		}
		country_event = { id = poland.1 days = 7 }
		hidden_effect = {
			news_event = { id = news.203 hours = 6 }
		}
	}

	option = {
		name = germany.86.b
		ai_chance = {
			factor = 80
			modifier = {
				factor = 3
				strength_ratio = {
					tag = GER
					ratio > 0.7
				}
			}
			modifier = {
				factor = 10
				any_other_country = {
					is_major = yes
					is_in_faction_with = POL
				}
			}
		}
		GER = { country_event = { id = germany.88 days = 1 }
			if = {
				limit = {
					is_in_faction_with = POL
					is_faction_leader = yes
				}
				remove_from_faction = POL
			}
			if = {
				limit = {
					is_in_faction_with = POL
					is_faction_leader = no
				}
				random_other_country = {
					limit = {
						is_in_faction_with = GER
						is_faction_leader = yes
					}
					remove_from_faction = GER
				}
			}
		}
		hidden_effect = {
			news_event = { hours = 1 id = news.204 }
		}
		effect_tooltip = {
			GER = {
				declare_war_on = {
					target = POL
					type = take_state
					generator = { 85 }
				}
			}
		}
	}
}

# Poland Cedes Danzig (Danzig or War)
country_event = {
	id = germany.87
	title = germany.87.t
	desc = germany.87.d
	picture = GFX_report_event_german_polish_border

	is_triggered_only = yes

	option = {
		name = germany.87.a
		transfer_state = 85
		transfer_state = 807
		add_state_core = 807
		remove_state_claim = 86
		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = -0.1 #dodged a bullet there
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = -0.1 #dodged a bullet there
			}
		}
	}
}

# Poland Refuses to Cede Danzig (Danzig or War)
country_event = {
	id = germany.88
	title = germany.88.t
	desc = germany.88.d
	picture = GFX_report_event_polish_tanks_02

	is_triggered_only = yes

	option = {
		name = germany.88.a
		if = {
			limit = {
				POL = {
					is_subject = yes
					OVERLORD = {
						has_non_aggression_pact_with = GER
					}
				}
			}
			POL = {
				OVERLORD = {
					diplomatic_relation = {
						country = GER
						relation = non_aggression_pact
						active = no
					}
				}
			}
		}
		if = {
			limit = {
				POL = {
					has_non_aggression_pact_with = GER
				}
			}
			POL = {
				diplomatic_relation = {
					country = GER
					relation = non_aggression_pact
					active = no
				}
			}
			every_other_country = {
				limit = {
					has_non_aggression_pact_with = GER
				}
				add_opinion_modifier = {
					target = GER
   					modifier = protest_action_strong
				}
			}
		}
		create_wargoal = {
			type = take_state
			generator = { 85 807 }
			target = POL
		}
		add_state_core = 85
		add_state_core = 807
		if = {
			limit = {
				ENG = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			ENG = {
				add_war_support = 0.1 #just not cricket
			}
		}
		if = {
			limit = {
				FRA = {
					NOT = {
						is_in_faction_with = GER
					}
				}
			}
			FRA = {
				add_war_support = 0.1
			}
		}
		if = {
			limit = {
				CZE = {
					exists = yes
					is_subject = no
					has_government = democratic
					NOT = { is_in_faction_with = GER }
				}
			}
			CZE = {
				add_ai_strategy = {
					type = conquer
					id = "GER"
					value = 200
				}
				add_ai_strategy = {
					type = alliance
					id = "POL"
					value = 200
				}
			}
		}
	}
}

#sov-ger unholy alliance
country_event = {
	id = germany.89
	title = germany.89.t
	desc = germany.89.d
	picture = GFX_report_event_molotov_ribbentrop_stalin_pact

	is_triggered_only = yes

	option = {
		name = germany.89.a
		dismantle_faction = yes
		add_stability = -0.1
		every_other_country = {
			limit = {
				OR = {
					AND = {
						NOT = { tag = GER }
						has_government = fascism
					}
					has_government = democratic
				}
			}
			add_opinion_modifier = { target = SOV modifier = unholy_alliance }
		}
		GER = {
			if = {
					limit = {
						is_faction_leader = yes
					}
					dismantle_faction = yes
			}
			if = {
					limit = {
						is_in_faction  = yes
					}
					remove_from_faction = GER
			}
			add_stability = -0.2
			create_faction = "the_berlin_moscow_axis"
			add_to_faction = SOV
			add_named_threat = { threat = 10 name = germany.89.t }
			every_other_country = {
				limit = {
					has_government = fascism
				}
				add_opinion_modifier = { target = GER modifier = communist_collaborators }
			}
			every_other_country = {
				limit = {
					has_government = democratic
				}
				add_opinion_modifier = { target = GER modifier = unholy_alliance }
			}
		}
		hidden_effect = {
			# Britain can rally democracies
			ENG = {
				country_event = { days = 3 id = britain.11 }
			}
			# US drops communism/fascism
			USA = {
				country_event = { id = usa.14 }
				country_event = { id = usa.24 }
			}
		}
	}

	option = {
		name = germany.89.b
		ai_chance = { factor = 0 }
		GER = {
			country_event = germany.90
			effect_tooltip = {
				remove_ideas = soviet_german_friendship
				create_wargoal = {
					type = take_state_focus
					target = SOV
					generator = { 219 217 } # Moscow and Stalingrad
				}
			}
		}
		remove_opinion_modifier = { target = GER modifier = ger_sov_alliance_focus }
		remove_ideas = soviet_german_friendship
	}
}

country_event = {
	id = germany.90
	title = germany.90.t
	desc = germany.90.d
	picture = GFX_report_event_stalin_02

	is_triggered_only = yes

	option = {
		name = germany.90.a
		remove_ideas = soviet_german_friendship
		create_wargoal = {
			type = take_state_focus
			target = SOV
			generator = { 219 217 } # Moscow and Stalingrad
		}
	}
}

# France national focus -  requests to join germany
country_event = {
	id = germany.91
	title = germany.91.t
	desc = germany.91.d
	picture = GFX_report_event_fascist_gathering

	is_triggered_only = yes

	option = {
		name = germany.91.a
		GER = { add_to_faction = FRA }
		FRA = {
			add_ai_strategy = {
				type = alliance
				id = "GER"
				value = 200
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.182 }
		}
	}
	option = {
		name = germany.91.b
		ai_chance = { factor = 0 }
		FRA = {
			add_opinion_modifier = {
				target = GER
				modifier = GER_FRA_join_germany_reject
			}
		}
		hidden_effect = {
			news_event = { hours = 6 id = news.183 }
		}
	}
}

# France/England (Germany Refuses Ultimatum)
country_event = {
	id = germany.92
	title = germany.92.t
	desc = germany.92.d
	picture = GFX_report_event_worried_french

	is_triggered_only = yes

	option = {
		name = germany.92.a
	}
}

# Germany (British and (possibly) French Support for Yugoslavia)
country_event = {
	id = germany.93
	title = germany.93.t
	desc = {
		text = germany.93.d
		trigger = { NOT = { has_global_flag = FRA_abandoned_yugoslavia } }
	}
	desc = {
		text = germany.93.d_FRA_abandoned_yugoslavia
		trigger = { has_global_flag = FRA_abandoned_yugoslavia }
	}
	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.93.a
		create_wargoal = {
			type = take_state_focus
			target = YUG
			generator = { 102 }
		}
		hidden_effect = {
			news_event = { id = news.164 hours = 6 }
		}
		set_country_flag = allies_support_yugoslavia
	}
}

# Germany (Yugoslavia Surrenders Slovenia)
country_event = {
	id = germany.94
	title = germany.94.t
	desc = germany.94.d
	picture = GFX_report_event_german_politician_speech

	is_triggered_only = yes

	option = {
		name = germany.94.a
		GER = { transfer_state = 102 }
		set_country_flag = slovenia_acquired
		hidden_effect = {
			news_event = { id = news.163 hours = 6 }
		}
	}
}

# Germany (Italy protects Yugoslavia)
country_event = {
	id = germany.96
	title = germany.96.t
	desc = germany.96.d
	picture = GFX_report_event_german_politician_speech

	is_triggered_only = yes

	option = {
		name = germany.96.a
		create_wargoal = {
			type = take_state_focus
			target = YUG
			generator = { 102 }
		}
		hidden_effect = {
			news_event = { id = news.167 hours = 6 }
		}
	}
}

# Germany (France protects Yugoslavia)
country_event = {
	id = germany.97
	title = germany.97.t
	desc = germany.97.d
	picture = GFX_report_event_german_politician_speech

	is_triggered_only = yes

	option = {
		name = germany.97.a
		create_wargoal = {
			type = take_state_focus
			target = YUG
			generator = { 102 }
		}
		hidden_effect = {
			news_event = { id = news.165 hours = 6 }
		}
	}
}

# Germany: Carve up Greece - Give land to Italy?
country_event = {
	id = germany.99
	title = germany.99.t
	desc = germany.99.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		ai_chance = { factor = 5 }
		name = germany.99.a

		ITA = { add_opinion_modifier = { target = GER modifier = GER_second_ljubljana_award_GER } }

		if = {
			limit = {
				GRE = { owns_state = 185 }
			}
			set_global_flag = GER_second_ljubljana_award_ITA_185
		}
		if = {
			limit = {
				GRE = { owns_state = 186 }
			}
			set_global_flag = GER_second_ljubljana_award_ITA_186
		}
		if = {
			limit = {
				GRE = { owns_state = 47 }
			}
			set_global_flag = GER_second_ljubljana_award_ITA_47
		}
		if = {
			limit = {
				OR = {
					has_global_flag = GER_second_ljubljana_award_BUL_done
					NOT = { has_global_flag = GER_second_ljubljana_award_BUL_event }
				}
			}
			GRE = { country_event = { id = greece.2 hours = 2 } }
		}
		set_global_flag = GER_second_ljubljana_award_ITA_done
	}

		#Don't give them anything
	option = {
		ai_chance = { factor = 0 }
		name = germany.99.b
		ITA = { add_opinion_modifier = { target = GER modifier = GER_second_ljubljana_award_noland } }
		set_global_flag = GER_second_ljubljana_award_ITA_done
	}
}

# Germany: Carve up Greece - Give land to Bulgaria?
country_event = {
	id = germany.100
	title = germany.100.t
	desc = germany.100.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		ai_chance = { factor = 5 }
		name = germany.100.a

		set_global_flag = GER_second_ljubljana_award_BUL_184
		BUL = { add_opinion_modifier = { target = GER modifier = GER_second_ljubljana_award_GER } }

		if = {
			limit = {
				OR = {
					has_global_flag = GER_second_ljubljana_award_ITA_done
					NOT = { has_global_flag = GER_second_ljubljana_award_ITA_event }
				}
			}
			GRE = { country_event = { id = greece.2 hours = 2 } }
		}
		set_global_flag = GER_second_ljubljana_award_BUL_done
	}

		#Don't give them anything
	option = {
		name = germany.100.b
		ai_chance = { factor = 0 }
		BUL = { add_opinion_modifier = { target = GER modifier = GER_second_ljubljana_award_noland } }
		set_global_flag = GER_second_ljubljana_award_BUL_done
	}
}

# Germany: Carve up Greece - Take land for Germany?
country_event = {
	id = germany.101
	title = germany.101.t
	desc = germany.101.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				731 = {
					any_neighbor_state = { is_owned_by = GER }
					is_owned_by = GRE
				}
			}
			set_global_flag = GER_second_ljubljana_award_GER_731
		}
		if = {
			limit = {
				185 = {
					any_neighbor_state = { is_owned_by = GER }
					is_owned_by = GRE
				}
			}
			set_global_flag = GER_second_ljubljana_award_GER_185
		}
		if = {
			limit = {
				47 = {
					any_neighbor_state = { is_owned_by = GER }
					is_owned_by = GRE
				}
			}
			set_global_flag = GER_second_ljubljana_award_GER_47
		}
	}

	option = {
		name = germany.101.a
		GRE = { country_event = { id = greece.2 hours = 2 } }
		custom_effect_tooltip = germany.101_tt
		effect_tooltip = {
			if = {
				limit = {
					has_global_flag = GER_second_ljubljana_award_GER_731
				}
				GER = { transfer_state = 731 }
			}
			if = {
				limit = {
					has_global_flag = GER_second_ljubljana_award_GER_185
					NOT = { has_global_flag = GER_second_ljubljana_award_GER_731 }
				}
				GER = { transfer_state = 185 }
			}
			if = {
				limit = {
					has_global_flag = GER_second_ljubljana_award_GER_47
					NOT = { has_global_flag = GER_second_ljubljana_award_GER_731 }
					NOT = { has_global_flag = GER_second_ljubljana_award_GER_185 }
				}
				GER = { transfer_state = 47 }
			}
		}
	}

	option = {
		name = germany.101.b
	}
}

# Germany: Greece refuses - Generate wargoal
country_event = {
	id = germany.102
	title = germany.102.t
	desc = germany.102.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.102.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = GRE
		}
		hidden_effect = {
			news_event = { id = news.229 hours = 6 }
		}
	}
}

# Germany: Greece refuses puppet request - Generate wargoal
country_event = {
	id = germany.103
	title = germany.103.t
	desc = germany.103.d

	picture = GFX_report_event_german_inspect_troops

	is_triggered_only = yes

	option = {
		name = germany.103.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = GRE
		}
	}
}

# Germany: Italy demands lands in Vichy France
country_event = {
	id = germany.104
	title = germany.104.t
	desc = { text = germany.104.d_Savoy 					trigger = { has_global_flag = ITA_claims_on_france_735 } }
	desc = { text = germany.104.d_Corsica 				trigger = { has_global_flag = ITA_claims_on_france_1 } }
	desc = { text = germany.104.d_Savoy_Corsica 	trigger = { has_global_flag = ITA_claims_on_france_735 has_global_flag = ITA_claims_on_france_1 } }


	picture = GFX_report_event_german_italian_pact

	is_triggered_only = yes

	# Italy gets 1 state Savoy
	option = {
		ai_chance = { factor = 70 }
		name = germany.104.a
		trigger = {
			has_global_flag = ITA_claims_on_france_735
			has_global_flag = ITA_claims_on_france_1
		}
		clr_global_flag = ITA_claims_on_france_1
		random_other_country = {
			limit = {
				original_tag = FRA
				has_government = fascism
			}
			country_event = france.27
		}
		ITA = { country_event = { id = italy.16 hours = 2 } }
	}

	# Italy gets 1 state Corsica
	option = {
		ai_chance = { factor = 70 }
		name = germany.104.b
		trigger = {
			NOT = { has_global_flag = ITA_claims_on_france_735 }
			has_global_flag = ITA_claims_on_france_1
		}
		random_other_country = {
			limit = {
				original_tag = FRA
				has_government = fascism
			}
			country_event = france.27
		}
		ITA = { country_event = { id = italy.15 hours = 2 } }
	}

	# Italy gets Savoy
	option = {
		ai_chance = { factor = 70 }
		name = germany.104.c
		trigger = {
			has_global_flag = ITA_claims_on_france_735
			NOT = { has_global_flag = ITA_claims_on_france_1 }
		}
		random_other_country = {
			limit = {
				original_tag = FRA
				has_government = fascism
			}
			country_event = france.27
		}
		ITA = { country_event = { id = italy.15 hours = 2 } }
	}

	# Italy gets Savoy and Corsica
	option = {
		ai_chance = { factor = 20 }
		name = germany.104.e
		trigger = {
			has_global_flag = ITA_claims_on_france_735
			has_global_flag = ITA_claims_on_france_1
		}
		random_other_country = {
			limit = {
				original_tag = FRA
				has_government = fascism
			}
			country_event = france.27
		}
		ITA = { country_event = { id = italy.15 hours = 2 } }
	}

	# Italy gets nothing
	option = {
		ai_chance = { factor = 10 }
		name = germany.104.f
		ITA = { country_event = { id = italy.14 hours = 2 } }
	}
}


# Germany: Italy leaves faction
country_event = {
	id = germany.105
	title = germany.105.t
	desc = germany.105.d
	picture = GFX_report_event_german_italian_pact

	is_triggered_only = yes

	option = {
		name = germany.105.a
	}
}

# Germany: Treaty Of Craiova
country_event = {
	id = germany.106
	title = germany.106.t
	desc = { text = germany.106.d_second_vienna_accepted_all trigger = { ROM = { has_country_flag = second_vienna_accepted_all } } }
	desc = { text = germany.106.d_second_vienna_accepted_north trigger = { ROM = { has_country_flag = second_vienna_accepted_north } } }
	desc = {
		text = germany.106.d_no_vienna
		trigger = {
			ROM = {
				NOT = { has_country_flag = second_vienna_accepted_all }
				NOT = { has_country_flag = second_vienna_accepted_north }
			}
		}
	}
	picture = GFX_report_event_vienna_award_hungary

	is_triggered_only = yes

	option = { # Give Bulgaria state 77
		name = germany.106.a
		ai_chance = { factor = 95
			modifier = {
				factor = 0
				BUL = {
					is_in_faction = yes
					NOT = { is_in_faction_with = GER }
				}
			}
		}
		add_named_threat = { threat = 2 name = germany.106_threat }
		BUL = {
			add_opinion_modifier = { target = GER modifier = GER_treaty_of_craiova_GER }

			every_other_country = {
				limit = {
					is_faction_leader = yes
					NOT = { tag = GER }
				}
				reverse_add_opinion_modifier = { target = BUL modifier = GER_treaty_of_craiova_other }
			}
		}
		ROM = {
			country_event = { id = romania.5 hours = 3 }
		}
	}
	option = { # Give Bulgaria nothing
		name = germany.106.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				NOT = {
					BUL = {
						is_in_faction = yes
						NOT = { is_in_faction_with = GER }
					}
				}
			}
		}
		BUL = {
			add_opinion_modifier = { target = GER modifier = GER_treaty_of_craiova_noland }
			country_event = { id = bulgaria.5 hours = 4 }
		}
	}
}

# Flight of Rudolf No Hindenburg
country_event = {
	id = germany.107
	title = germany.107.t
	desc = germany.107.d
	picture = GFX_report_event_airplane_crash

	is_triggered_only = yes

	immediate = {
		set_country_flag = flight_of_hess
		if = {
			limit = {
				has_idea = rudolf_hess
			}
			remove_ideas = rudolf_hess
		}
	}

	option = {
		name = germany.107.a
	}
}

# Rudolf Hess killed No Hindenburg
country_event = {
	id = germany.108
	title = germany.108.t
	desc = germany.108.d
	picture = GFX_report_event_airplane_crash

	is_triggered_only = yes

	immediate = {
		set_country_flag = flight_of_hess
		if = {
			limit = {
				has_idea = rudolf_hess
			}
			remove_ideas = rudolf_hess
		}
	}

	option = {
		name = germany.108.a
	}
}

# Flight of Rudolf Hess (Hindenburg)
country_event = {
	id = germany.109
	title = germany.107.t
	desc = germany.109.d
	picture = GFX_report_event_hindenburg_flames

	is_triggered_only = yes

	immediate = {
		set_country_flag = flight_of_hess
		if = {
			limit = {
				has_idea = rudolf_hess
			}
			remove_ideas = rudolf_hess
		}
	}

	option = {
		name = germany.108.a
	}
}

# Rudolf Hess Killed (Hindenburg)
country_event = {
	id = germany.110
	title = germany.108.t
	desc = germany.110.d
	picture = GFX_report_event_hindenburg_flames

	is_triggered_only = yes

	immediate = {
		set_country_flag = flight_of_hess
		if = {
			limit = {
				has_idea = rudolf_hess
			}
			remove_ideas = rudolf_hess
		}
	}

	option = {
		name = germany.110.a
	}
}

# Yugoslavia refuses
country_event = {
	id = germany.111
	title = germany.111.t
	desc = germany.111.d
	picture = GFX_report_event_german_troops

	is_triggered_only = yes

	option = {
		name = germany.111.a
		create_wargoal = {
			type = annex_everything
			target = YUG
		}
	}
}

# (Hidden)
country_event = {
	id = germany.112

	is_triggered_only = yes

	hidden = yes

	immediate = {
		every_other_country = {
			limit = { has_idea = anti_soviet_pact }
			add_opinion_modifier = { target = FROM modifier = anti_soviet_pact_call_refused }
		}
	}
}

country_event = {
	id = germany.120
	title = germany.120.t
	desc = germany.120.d
	picture = GFX_report_event_generic_sign_treaty1

	fire_only_once = yes

	is_triggered_only = yes

	option = {
		name = germany.120.a
	}
}


#Events in case of weirdness with German Czechoslovakia focus
country_event = {
	id = germany.122
	title = germany.122.t
	desc = germany.122.d
	picture = GFX_report_event_german_speech

	is_triggered_only = yes

	option = {
		name = germany.122.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0.8
				strength_ratio = { tag = GER ratio < 0.5 }
			}
			modifier = {
				factor = 0.8
				has_opinion = { target = GER value > 99 }
			}
			modifier = {
				factor = 0.8
				strength_ratio = { tag = GER ratio < 0.3 }
			}
			modifier = {
				factor = 0.8
				strength_ratio = { tag = GER ratio < 0.2 }
			}
			modifier = {
				factor = 0.5
				strength_ratio = { tag = GER ratio < 0.1 }
			}
		}
		if = {
			limit = {
				is_in_faction_with = GER
				is_subject = no
			}
			remove_from_faction = CZE #kicked from faction
		}

		effect_tooltip = {
			GER = {
				add_state_claim = 69
				add_state_claim = 74
				create_wargoal = {
					type = take_state_focus
					target = CZE
					generator = { 69 74 }
				}
			}
		}
		hidden_effect = {
			GER = {
				country_event = { id = germany.123 days = 1 }
			}
		}
	}

	option = {
		name = germany.122.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				FRA = { has_completed_focus = FRA_strengthen_the_little_entente }
			}
			modifier = {
				factor = 0
				POL = {
					OR = {
						has_completed_focus = POL_protect_czechozlovakia
						has_completed_focus = POL_coerce_czechoslovakia
					}
				}
				OR = {
					is_guaranteed_by = POL
					is_in_faction_with = POL
				}
			}
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					has_guaranteed = CZE
				}
			}
			modifier = {
				factor = 0
				any_other_country = {
					is_major = yes
					is_in_faction_with = CZE
				}
			}
			modifier = {
				factor = 0.8
				any_other_country = {
					is_major = no
					has_guaranteed = CZE
				}
			}
			modifier = {
				factor = 0.8
				is_in_faction = yes
				NOT = {
					any_other_country = {
						is_major = yes
						is_in_faction_with = CZE
					}
				}
			}
		}
		effect_tooltip = {
			GER = {
				transfer_state = 69
				transfer_state = 74
			}
		}
		hidden_effect = {
			GER = {
				country_event = {
					id = germany.124 days = 1
				}
			}
		}
	}
}


#Events in case of weirdness with German Czechoslovakia focus
country_event = {
	id = germany.123
	title = germany.123.t
	desc = germany.123.d
	picture = GFX_report_event_czech_soldiers_02

	is_triggered_only = yes

	option = {
		name = germany.123.a
		add_state_claim = 69
		add_state_claim = 74
		if = {
			limit = {
				CZE = { is_subject_of = FROM }
				FROM = {
					is_in_faction_with = GER
					is_faction_leader = no
				}
			}
			remove_from_faction = CZE
			remove_from_faction = FROM
		}
		69 = {
			controller = {
				GER = {
					create_wargoal = {
						type = take_state_focus
						target = PREV
						generator = { 69 74 }
					}
				}
			}
		}
	}
}


#Events in case of weirdness with German Czechoslovakia focus
country_event = {
	id = germany.124
	title = germany.124.t
	desc = germany.124.d
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = {
		name = germany.124.a
		add_state_core = 69
		transfer_state = 69
		add_state_core = 74
		transfer_state = 74
	}
}

#Event if Austria has a civil war
country_event = {
	id = germany.126
	title = germany.126.t
	desc = germany.126.d
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = {
		name = germany.126.a
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
		}
		random_other_country = {
			limit = {
				original_tag = AUS
				NOT = { tag = ROOT }
			}
			FROM = {
				add_to_war = {
					targeted_alliance = ROOT
					enemy = PREV
					hostility_reason = war
				}
				annex_country = { target = ROOT transfer_troops = yes }
				hidden_effect = { news_event = { id = news.237 } }
			}
		}
		custom_effect_tooltip = GAME_OVER_TT
	}
	option = {
		name = germany.126.b
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				OR = {
					has_government = communism
					has_government = democratic
				}
			}
		}
		every_country = {
			limit = {
				OR = {
					tag = AUS
					original_tag = AUS
				}
			}
			FROM = {
				create_wargoal = {
					target = PREV
					type = annex_everything
				}
			}
		}
	}
}

# Anti-Soviet Pact, ask Germany to create faction or invite to faction
country_event = {
	id = germany.127
	title = germany.127.t
	desc = germany.127.d
	picture = GFX_report_event_soviet_tanks

	is_triggered_only = yes

	# Create faction (if none) and send requests to join faction (members leave other faction)
	option = {
		name = germany.127.a
		every_other_country = {
			limit = {
				has_idea = anti_soviet_pact
				has_war_with = SOV
			}
			country_event = { id = germany.128 days = 1 }
		}
		if = {
			limit = {
				is_in_faction = no
			}
			create_faction = "anti_soviet_pact"
		}
	}

	# No ty
	option = {
		name = germany.127.b
		ai_chance = {
			base = 0
		}
	}
}

# Anti-Soviet Pact, Germany asks country to join faction
country_event = {
	id = germany.128
	title = germany.128.t
	desc = germany.128.d
	picture = GFX_report_event_soviet_tanks

	is_triggered_only = yes

	# Join faction (if none) and send requests to join faction (members leave other faction)
	option = {
		name = germany.128.a
		trigger = {
			is_in_faction = no
		}
		ai_chance = {
			base = 10
		}
		GER = { add_to_faction = ROOT }
	}

	# No ty
	option = {
		name = germany.128.b
		ai_chance = {
			base = 0
		}
	}
}

#rename city
country_event = {
	id = germany.999
	title = germany.999.t
	desc = germany.999.desc
	picture = GFX_report_event_german_reichstag_gathering

	fire_only_once = yes

	trigger = {
		tag = GER
		GER = {
			has_government = fascism
			owns_state = 217
			owns_state = 195
		}
	}

	option = { #a great idea!
		name = germany.999.a
		ai_chance = {
			base = 100
		}
		set_province_name = { id = 3529 name = "Hindenburg"}
		set_province_name = { id = 3151 name = "Ludendorff"}
		set_global_flag = GER_cities_renamed
	}

	option = { #rather not
		name = germany.999.b
		ai_chance = {
			base = 0
		}
		add_stability = -0.05 #because fuck you
							  #language
	}

}

#reset city name if retaken
country_event = {
	id = germany.1000
	title = germany.1000.t
	desc = germany.1000.desc
	picture = GFX_report_event_german_reichstag_gathering

	hidden = yes

	trigger = {
		SOV = {
			has_government = communism
			owns_state = 217
			owns_state = 195
		}
		OR = {
			has_global_flag = GER_cities_renamed
			has_global_flag = ROM_king_is_silly
		}
	}

	mean_time_to_happen = { days = 30 }

	option = { #a great idea!
		name = germany.1000.a
		ai_chance = {
			base = 100
		}
		reset_province_name = 3529
		reset_province_name = 3151
		clr_global_flag = GER_cities_renamed
		clr_global_flag = ROM_king_is_silly
	}
}

#remove MEFO bills
country_event = {
	id = germany.1001
	title = germany.1001.t
	desc = germany.1001.desc
	picture = GFX_report_event_german_reichstag_gathering

	hidden = yes

	trigger = {
		original_tag = GER
		GER_has_mefo_bills = yes
		any_other_country = {
			has_war_with = GER
			NOT = { original_tag = GER }
		}
	}

	mean_time_to_happen = { days = 2 }

	option = { #remove MEFO
		name = germany.1001.a
		ai_chance = {
			base = 100
		}
		ROOT = {
			GER_remove_mefo_bills = yes
			set_country_flag = mefo_bills_removed_through_war
		}
	}
}

country_event = { #Hand over sudetenland even if we're not czech
	id = germany.1041
	title = germany.1041.t
	desc = germany.1041.desc
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = { #SURE
		name = germany.1041.a
		ai_chance = {
			base = 50
		}
		effect_tooltip = {
			GER = {
				transfer_state = 69
				transfer_state = 74
			}
		}
		hidden_effect = {
			GER = {
				country_event = { id = germany.1042 }
			}
		}
	}

	option = { #NO THX
		name = germany.1041.b

		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state_focus
					target = PREV
					expire = 0
					generator = { 69 }
				}
			}
		}
		hidden_effect = {
			GER = {
				country_event = { id = germany.1043 }
			}
		}
		ai_chance = {
			base = 5 #No need for long and complicated factors here - it's an edge case
			modifier = {
				factor = 10
				is_historical_focus_on = no
			}
		}

	}
}

country_event = { #Handed Over
	id = germany.1042
	title = germany.1042.t
	desc = germany.1042.desc
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = { #SURE
		name = germany.1042.a
		69 = {
			controller = {
				GER = {
					transfer_state = 69
					transfer_state = 74
				}
			}
		}
	}
}

country_event = { #Handed Over.. NOT
	id = germany.1043
	title = germany.1043.t
	desc = germany.1043.desc
	picture = GFX_report_event_german_reichstag_gathering

	is_triggered_only = yes

	option = { #NOPE
		name = germany.1043.a
		create_wargoal = {
			type = take_state_focus
			target = FROM
			expire = 0
			generator = { 69 }
		}
	}
}